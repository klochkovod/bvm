"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
exports.getAgent = void 0;
const network_agent_1 = require("@pnpm/network.agent");
const network_ca_file_1 = require("@pnpm/network.ca-file");
const memoizee_1 = __importDefault(require("memoizee"));
const readCAFileSyncCached = (0, memoizee_1.default)(network_ca_file_1.readCAFileSync);
function getAgent(uri, opts) {
    if (!opts.ca && opts.cafile) {
        opts = Object.assign(Object.assign({}, opts), { ca: readCAFileSyncCached(opts.cafile) });
    }
    return (0, network_agent_1.getAgent)(uri, Object.assign({ strictSsl: opts.strictSSL }, opts));
}
exports.getAgent = getAgent;
//# sourceMappingURL=agent.js.map